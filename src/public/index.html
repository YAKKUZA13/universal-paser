<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Универсальный Парсер Сайтов v2.0</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="main-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-spider"></i> Универсальный Парсер v2.0</h1>
                <div class="header-info">
                    <span class="version-badge">v2.0</span>
                    <span class="feature-badge">ИИ Поддержка</span>
                </div>
            </div>
            <nav class="nav-tabs">
                <button class="tab-btn active" data-tab="basic">Основные</button>
                <button class="tab-btn" data-tab="advanced">Продвинутые</button>
                <button class="tab-btn" data-tab="ai">ИИ Анализ</button>
                <button class="tab-btn" data-tab="preview">Превью</button>
                <button class="tab-btn" data-tab="monitor">Мониторинг</button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Basic Tab -->
            <div id="basic" class="tab-content active">
                <div class="content-grid">
                    <div class="form-section">
                        <h2><i class="fas fa-link"></i> Основные настройки</h2>
                        <form id="parserForm">
                            <div class="form-group">
                                <label for="url"><i class="fas fa-globe"></i> URL сайта:</label>
                                <div class="input-group">
                                    <input type="url" id="url" name="url" required placeholder="https://example.com">
                                    <button type="button" id="validateUrlBtn" class="btn-secondary">
                                        <i class="fas fa-check"></i> Проверить
                                    </button>
                                </div>
                                <div id="urlValidation" class="validation-result"></div>
                            </div>

                            <div class="form-group">
                                <label for="itemSelector"><i class="fas fa-crosshairs"></i> Основной селектор:</label>
                                <div class="input-group">
                                    <input type="text" id="itemSelector" name="itemSelector" placeholder=".product-item, .article">
                                    <button type="button" id="analyzeBtn" class="btn-secondary">
                                        <i class="fas fa-brain"></i> ИИ Анализ
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="strategy"><i class="fas fa-cogs"></i> Стратегия парсинга:</label>
                                <select id="strategy" name="strategy">
                                    <option value="">Автоматический выбор</option>
                                    <option value="cheerio">Cheerio (Быстрый)</option>
                                    <option value="puppeteer">Puppeteer (JavaScript)</option>
                                    <option value="xpath">XPath (Продвинутый)</option>
                                    <option value="smart-puppeteer">Smart Puppeteer (ИИ + SPA)</option>
                                </select>
                                <div class="strategy-info">
                                    <small id="strategyDescription"></small>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="maxPages"><i class="fas fa-layer-group"></i> Макс. страниц:</label>
                                    <input type="number" id="maxPages" name="maxPages" value="1" min="1" max="100">
                                </div>
                                <div class="form-group">
                                    <label for="delay"><i class="fas fa-clock"></i> Задержка (мс):</label>
                                    <input type="number" id="delay" name="delay" value="1000" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="fileExtension"><i class="fas fa-file-export"></i> Формат:</label>
                                    <select id="fileExtension" name="fileExtension">
                                        <option value="json">JSON</option>
                                        <option value="csv">CSV</option>
                                    </select>
                                </div>
                            </div>

                            <div class="action-buttons">
                                <button type="button" id="previewBtn" class="btn-secondary">
                                    <i class="fas fa-eye"></i> Превью
                                </button>
                                <button type="button" id="estimateBtn" class="btn-secondary">
                                    <i class="fas fa-calculator"></i> Оценить время
                                </button>
                                <button type="submit" id="parseBtn" class="btn-primary">
                                    <i class="fas fa-play"></i> Начать парсинг
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="info-section">
                        <div class="info-card">
                            <h3><i class="fas fa-info-circle"></i> Информация</h3>
                            <div id="infoContent">
                                <p>Универсальный парсер v2.0 с ИИ возможностями</p>
                                <ul>
                                    <li>4 стратегии парсинга</li>
                                    <li>Интеллектуальный анализ структуры</li>
                                    <li>XPath селекторы</li>
                                    <li>SPA поддержка</li>
                                    <li>Fallback стратегии</li>
                                    <li>Валидация данных</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Tab -->
            <div id="advanced" class="tab-content">
                <div class="content-grid">
                    <div class="form-section">
                        <h2><i class="fas fa-sliders-h"></i> Продвинутые настройки</h2>
                        
                        <!-- Pagination Settings -->
                        <div class="section-block">
                            <h3><i class="fas fa-th-list"></i> Пагинация</h3>
                            <div class="form-group">
                                <label for="paginationType">Тип пагинации:</label>
                                <select id="paginationType" name="paginationType">
                                    <option value="none">Без пагинации</option>
                                    <option value="query">Query-параметры (?page=1)</option>
                                    <option value="path">Path-пагинация (/page/1)</option>
                                    <option value="button">Кнопка "Следующая страница"</option>
                                    <option value="infinite">Бесконечная прокрутка</option>
                                </select>
                            </div>

                            <div id="paginationConfig" class="pagination-config">
                                <div id="queryConfig" class="config-section">
                                    <div class="form-group">
                                        <label for="queryParam">Параметр страницы:</label>
                                        <input type="text" id="queryParam" name="queryParam" placeholder="page" value="page">
                                    </div>
                                </div>

                                <div id="pathConfig" class="config-section">
                                    <div class="form-group">
                                        <label for="pathPrefix">Префикс пути:</label>
                                        <input type="text" id="pathPrefix" name="pathPrefix" placeholder="page/" value="page/">
                                    </div>
                                </div>

                                <div id="buttonConfig" class="config-section">
                                    <div class="form-group">
                                        <label for="nextPageSelector">Селектор кнопки:</label>
                                        <input type="text" id="nextPageSelector" name="nextPageSelector" placeholder=".pagination .next">
                                    </div>
                                </div>

                                <div id="infiniteConfig" class="config-section">
                                    <div class="form-group">
                                        <label for="loadMoreSelector">Селектор "Загрузить еще":</label>
                                        <input type="text" id="loadMoreSelector" name="loadMoreSelector" placeholder=".load-more">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- XPath Selectors -->
                        <div class="section-block">
                            <h3><i class="fas fa-code"></i> XPath Селекторы</h3>
                            <div id="xpathSelectors" class="selectors-container">
                                <div class="selector-item">
                                    <input type="text" placeholder="//div[@class='title']" class="xpath-input">
                                    <input type="text" placeholder="title" class="xpath-name">
                                    <select class="xpath-type">
                                        <option value="text">Текст</option>
                                        <option value="html">HTML</option>
                                        <option value="attribute">Атрибут</option>
                                    </select>
                                    <input type="text" placeholder="href" class="xpath-attribute" style="display:none;">
                                    <button type="button" class="btn-icon remove-xpath">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="xpath-tools">
                                <button type="button" id="addXPathBtn" class="btn-secondary">
                                    <i class="fas fa-plus"></i> Добавить XPath
                                </button>
                                <button type="button" id="convertCSSBtn" class="btn-secondary">
                                    <i class="fas fa-exchange-alt"></i> CSS → XPath
                                </button>
                                <button type="button" id="validateXPathBtn" class="btn-secondary">
                                    <i class="fas fa-check-circle"></i> Валидировать
                                </button>
                            </div>
                        </div>

                        <!-- SPA Settings -->
                        <div class="section-block">
                            <h3><i class="fas fa-cog"></i> SPA и JavaScript</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="spa" name="spa">
                                    <span class="checkmark"></span>
                                    SPA поддержка
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="infiniteScrolling" name="infiniteScrolling">
                                    <span class="checkmark"></span>
                                    Infinite Scrolling
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="enableSmartAnalysis" name="enableSmartAnalysis" checked>
                                    <span class="checkmark"></span>
                                    Умный анализ
                                </label>
                            </div>

                            <div class="form-group">
                                <label for="waitStrategy">Стратегия ожидания:</label>
                                <select id="waitStrategy" name="waitStrategy">
                                    <option value="networkidle2">Network Idle (2)</option>
                                    <option value="networkidle0">Network Idle (0)</option>
                                    <option value="domcontentloaded">DOM Content Loaded</option>
                                    <option value="load">Load Event</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="customWaitSelector">Кастомный селектор ожидания:</label>
                                <input type="text" id="customWaitSelector" name="customWaitSelector" placeholder=".content-loaded">
                            </div>
                        </div>
                    </div>

                    <div class="tools-section">
                        <div class="tool-card">
                            <h3><i class="fas fa-tools"></i> Инструменты</h3>
                            <div class="tool-buttons">
                                <button type="button" id="testSelectorBtn" class="btn-tool">
                                    <i class="fas fa-vial"></i>
                                    Тест селектора
                                </button>
                                <button type="button" id="generateSchemaBtn" class="btn-tool">
                                    <i class="fas fa-file-code"></i>
                                    Генерировать схему
                                </button>
                                <button type="button" id="exportConfigBtn" class="btn-tool">
                                    <i class="fas fa-download"></i>
                                    Экспорт конфига
                                </button>
                                <button type="button" id="importConfigBtn" class="btn-tool">
                                    <i class="fas fa-upload"></i>
                                    Импорт конфига
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Analysis Tab -->
            <div id="ai" class="tab-content">
                <div class="ai-analysis-container">
                    <div class="analysis-section">
                        <h2><i class="fas fa-brain"></i> ИИ Анализ структуры</h2>
                        <div class="analysis-input">
                            <div class="form-group">
                                <label for="analyzeUrl">URL для анализа:</label>
                                <div class="input-group">
                                    <input type="url" id="analyzeUrl" placeholder="https://example.com">
                                    <button type="button" id="runAnalysisBtn" class="btn-primary">
                                        <i class="fas fa-search"></i> Анализировать
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="analysisResults" class="analysis-results">
                            <!-- Results will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preview Tab -->
            <div id="preview" class="tab-content">
                <div class="preview-container">
                    <h2><i class="fas fa-eye"></i> Предварительный просмотр</h2>
                    <div class="preview-controls">
                        <button type="button" id="runPreviewBtn" class="btn-primary">
                            <i class="fas fa-play"></i> Запустить превью
                        </button>
                        <span class="preview-info">Показать первые 5 элементов</span>
                    </div>
                    
                    <div id="previewResults" class="preview-results">
                        <!-- Preview results will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Monitor Tab -->
            <div id="monitor" class="tab-content">
                <div class="monitor-container">
                    <h2><i class="fas fa-chart-line"></i> Мониторинг</h2>
                    <div class="monitor-grid">
                        <div class="monitor-card">
                            <h3>Статистика парсинга</h3>
                            <div id="parsingStats" class="stats-content">
                                <div class="stat-item">
                                    <span class="stat-label">Всего запросов:</span>
                                    <span class="stat-value" id="totalRequests">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Успешных:</span>
                                    <span class="stat-value" id="successfulRequests">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Ошибок:</span>
                                    <span class="stat-value" id="failedRequests">0</span>
                                </div>
                            </div>
                        </div>

                        <div class="monitor-card">
                            <h3>Прогресс</h3>
                            <div class="progress-container">
                                <div id="progressBar" class="progress-bar">
                                    <div class="progress-fill"></div>
                                </div>
                                <div id="progressText" class="progress-text">0%</div>
                            </div>
                        </div>

                        <div class="monitor-card">
                            <h3>Логи</h3>
                            <div id="logsContainer" class="logs-container">
                                <!-- Logs will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Notifications -->
        <div id="notifications" class="notifications-container"></div>

        <!-- Modals -->
        <div id="cssToXPathModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Конвертация CSS в XPath</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="cssInput">CSS Селектор:</label>
                        <input type="text" id="cssInput" placeholder=".product-item h2">
                    </div>
                    <div class="form-group">
                        <label for="xpathOutput">XPath Результат:</label>
                        <input type="text" id="xpathOutput" readonly>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="convertBtn" class="btn-primary">Конвертировать</button>
                    <button type="button" class="modal-close btn-secondary">Закрыть</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-spinner"></div>
            <div class="loading-text">Обработка...</div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 